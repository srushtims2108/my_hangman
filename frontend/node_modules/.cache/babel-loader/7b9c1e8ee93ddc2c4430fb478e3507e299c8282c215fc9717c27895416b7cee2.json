{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\srush\\\\hangman\\\\frontend\\\\src\\\\components\\\\Wait.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { socket } from \"../modules\";\nimport { InputLabel, TextField, Button, Typography } from \"@material-ui/core\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Wait({\n  user,\n  roomID,\n  gameState,\n  setGameState,\n  setUser,\n  mute\n}) {\n  _s();\n  const [formUser, setFormUser] = useState(\"\");\n  const [copy, setCopy] = useState(\"Copy Link\");\n  const timerRef = useRef();\n  const url = window.location.href;\n  const handleUpdate = useCallback(newState => {\n    setGameState({\n      ...newState\n    });\n  }, [setGameState]);\n  const handleSubmitJoin = e => {\n    e.preventDefault();\n    const credentials = {\n      roomID,\n      user: formUser\n    };\n    setUser(formUser);\n    setFormUser(\"\");\n    socket.emit(\"join\", credentials);\n    const message = `${formUser} has joined`;\n    const info = {\n      roomID,\n      user: \"join\",\n      message,\n      effects: true\n    };\n    socket.emit(\"chat\", info);\n  };\n  const validateUsername = () => {\n    const username = document.getElementById(\"username\");\n    if (gameState.players.includes(username.value)) {\n      username.setCustomValidity(\"Username is already taken\");\n    } else if (!/^[^\\s]+(\\s+[^\\s]+)*$/.test(username.value)) {\n      username.setCustomValidity(\"Guess cannot have leading or trailing spaces\");\n    } else if (username.value.length > 20) {\n      username.setCustomValidity(\"Username cannot be more than 20 characters\");\n    } else {\n      username.setCustomValidity(\"\");\n    }\n  };\n  const onButtonClick = () => {\n    socket.emit(\"start\", roomID);\n  };\n  const copyLink = () => {\n    navigator.clipboard.writeText(url).then(() => {\n      clearTimeout(timerRef.current);\n      setCopy(\"Copied!\");\n      timerRef.current = setTimeout(() => setCopy(\"Copy Link\"), 5000);\n    }, () => {\n      clearTimeout(timerRef.current);\n      setCopy(\"Failed to Copy\");\n      timerRef.current = setTimeout(() => setCopy(\"Copy Link\"), 5000);\n    });\n  };\n  useEffect(() => {\n    socket.on(\"update\", handleUpdate);\n    socket.emit(\"joinRoom\", roomID);\n    return () => {\n      socket.off(\"update\", handleUpdate);\n    };\n  }, [roomID, handleUpdate]);\n  const render = () => {\n    if (gameState && gameState.players.length >= gameState.cap && user === \"\") {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Sorry, Room is full\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        paragraph: true,\n        children: \"Players\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), gameState.players.map(player => /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        children: player\n      }, player, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), user === gameState.hanger && gameState.players.length >= 2 && /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: onButtonClick,\n        children: \"Start game!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this), !gameState.players.includes(user) && /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"wait\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmitJoin,\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            htmlFor: \"username\",\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            type: \"text\",\n            value: formUser,\n            onChange: e => setFormUser(e.target.value),\n            onInput: validateUsername,\n            id: \"username\",\n            name: \"username\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        paragraph: true,\n        children: [\"Share this link with your friends:\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), url, \" \", /*#__PURE__*/_jsxDEV(Button, {\n          onClick: copyLink,\n          color: \"primary\",\n          children: copy\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: render()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 10\n  }, this);\n}\n_s(Wait, \"S//XzaQ9LN3i32gRZYtk7Tx9/9g=\");\n_c = Wait;\nexport default Wait;\nvar _c;\n$RefreshReg$(_c, \"Wait\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","socket","InputLabel","TextField","Button","Typography","jsxDEV","_jsxDEV","Fragment","_Fragment","Wait","user","roomID","gameState","setGameState","setUser","mute","_s","formUser","setFormUser","copy","setCopy","timerRef","url","window","location","href","handleUpdate","newState","handleSubmitJoin","e","preventDefault","credentials","emit","message","info","effects","validateUsername","username","document","getElementById","players","includes","value","setCustomValidity","test","length","onButtonClick","copyLink","navigator","clipboard","writeText","then","clearTimeout","current","setTimeout","on","off","render","cap","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","paragraph","map","player","hanger","color","onClick","id","onSubmit","htmlFor","type","onChange","target","onInput","name","required","_c","$RefreshReg$"],"sources":["C:/Users/srush/hangman/frontend/src/components/Wait.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { socket } from \"../modules\";\r\nimport { InputLabel, TextField, Button, Typography } from \"@material-ui/core\";\r\n\r\nfunction Wait({ user, roomID, gameState, setGameState, setUser, mute }) {\r\n  const [formUser, setFormUser] = useState(\"\");\r\n  const [copy, setCopy] = useState(\"Copy Link\");\r\n  const timerRef = useRef();\r\n  const url = window.location.href;\r\n\r\n  const handleUpdate = useCallback((newState) => {\r\n    setGameState({ ...newState });\r\n  }, [setGameState]);\r\n\r\n  const handleSubmitJoin = (e) => {\r\n    e.preventDefault();\r\n\r\n    const credentials = {\r\n      roomID,\r\n      user: formUser,\r\n    };\r\n\r\n    setUser(formUser);\r\n    setFormUser(\"\");\r\n\r\n    socket.emit(\"join\", credentials);\r\n\r\n    const message = `${formUser} has joined`;\r\n\r\n    const info = {\r\n      roomID,\r\n      user: \"join\",\r\n      message,\r\n      effects: true,\r\n    };\r\n\r\n    socket.emit(\"chat\", info);\r\n  };\r\n\r\n  const validateUsername = () => {\r\n    const username = document.getElementById(\"username\");\r\n\r\n    if (gameState.players.includes(username.value)) {\r\n      username.setCustomValidity(\"Username is already taken\");\r\n    } else if (!/^[^\\s]+(\\s+[^\\s]+)*$/.test(username.value)) {\r\n      username.setCustomValidity(\r\n        \"Guess cannot have leading or trailing spaces\"\r\n      );\r\n    } else if (username.value.length > 20) {\r\n      username.setCustomValidity(\"Username cannot be more than 20 characters\");\r\n    } else {\r\n      username.setCustomValidity(\"\");\r\n    }\r\n  };\r\n\r\n  const onButtonClick = () => {\r\n    socket.emit(\"start\", roomID);\r\n  };\r\n\r\n  const copyLink = () => {\r\n    navigator.clipboard.writeText(url).then(\r\n      () => {\r\n        clearTimeout(timerRef.current);\r\n        setCopy(\"Copied!\");\r\n        timerRef.current = setTimeout(() => setCopy(\"Copy Link\"), 5000);\r\n      },\r\n      () => {\r\n        clearTimeout(timerRef.current);\r\n        setCopy(\"Failed to Copy\");\r\n        timerRef.current = setTimeout(() => setCopy(\"Copy Link\"), 5000);\r\n      }\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"update\", handleUpdate);\r\n    socket.emit(\"joinRoom\", roomID);\r\n\r\n    return () => {\r\n      socket.off(\"update\", handleUpdate);\r\n    };\r\n  }, [roomID, handleUpdate]);\r\n\r\n  const render = () => {\r\n    if (gameState && gameState.players.length >= gameState.cap && user === \"\") {\r\n      return <p>Sorry, Room is full</p>;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <Typography variant=\"h4\" paragraph>\r\n          Players\r\n        </Typography>\r\n\r\n        {gameState.players.map((player) => (\r\n          <Typography key={player} variant=\"h6\">\r\n            {player}\r\n          </Typography>\r\n        ))}\r\n\r\n        <br />\r\n\r\n        {user === gameState.hanger && gameState.players.length >= 2 && (\r\n          <Button variant=\"contained\" color=\"primary\" onClick={onButtonClick}>\r\n            Start game!\r\n          </Button>\r\n        )}\r\n\r\n        {!gameState.players.includes(user) && (\r\n          <div id=\"wait\">\r\n            <form onSubmit={handleSubmitJoin}>\r\n              <InputLabel htmlFor=\"username\">Username</InputLabel>\r\n              <TextField\r\n                type=\"text\"\r\n                value={formUser}\r\n                onChange={(e) => setFormUser(e.target.value)}\r\n                onInput={validateUsername}\r\n                id=\"username\"\r\n                name=\"username\"\r\n                required\r\n              />\r\n            </form>\r\n          </div>\r\n        )}\r\n\r\n        <br />\r\n        <br />\r\n\r\n        <Typography paragraph>\r\n          Share this link with your friends:\r\n          <br />\r\n          {url}{\" \"}\r\n          <Button onClick={copyLink} color=\"primary\">\r\n            {copy}\r\n          </Button>\r\n        </Typography>\r\n      </>\r\n    );\r\n  };\r\n\r\n  return <div>{render()}</div>;\r\n}\r\n\r\nexport default Wait;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AACvE,SAASC,MAAM,QAAQ,YAAY;AACnC,SAASC,UAAU,EAAEC,SAAS,EAAEC,MAAM,EAAEC,UAAU,QAAQ,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE9E,SAASC,IAAIA,CAAC;EAAEC,IAAI;EAAEC,MAAM;EAAEC,SAAS;EAAEC,YAAY;EAAEC,OAAO;EAAEC;AAAK,CAAC,EAAE;EAAAC,EAAA;EACtE,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACuB,IAAI,EAAEC,OAAO,CAAC,GAAGxB,QAAQ,CAAC,WAAW,CAAC;EAC7C,MAAMyB,QAAQ,GAAGvB,MAAM,CAAC,CAAC;EACzB,MAAMwB,GAAG,GAAGC,MAAM,CAACC,QAAQ,CAACC,IAAI;EAEhC,MAAMC,YAAY,GAAG3B,WAAW,CAAE4B,QAAQ,IAAK;IAC7Cd,YAAY,CAAC;MAAE,GAAGc;IAAS,CAAC,CAAC;EAC/B,CAAC,EAAE,CAACd,YAAY,CAAC,CAAC;EAElB,MAAMe,gBAAgB,GAAIC,CAAC,IAAK;IAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAElB,MAAMC,WAAW,GAAG;MAClBpB,MAAM;MACND,IAAI,EAAEO;IACR,CAAC;IAEDH,OAAO,CAACG,QAAQ,CAAC;IACjBC,WAAW,CAAC,EAAE,CAAC;IAEflB,MAAM,CAACgC,IAAI,CAAC,MAAM,EAAED,WAAW,CAAC;IAEhC,MAAME,OAAO,GAAG,GAAGhB,QAAQ,aAAa;IAExC,MAAMiB,IAAI,GAAG;MACXvB,MAAM;MACND,IAAI,EAAE,MAAM;MACZuB,OAAO;MACPE,OAAO,EAAE;IACX,CAAC;IAEDnC,MAAM,CAACgC,IAAI,CAAC,MAAM,EAAEE,IAAI,CAAC;EAC3B,CAAC;EAED,MAAME,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;IAEpD,IAAI3B,SAAS,CAAC4B,OAAO,CAACC,QAAQ,CAACJ,QAAQ,CAACK,KAAK,CAAC,EAAE;MAC9CL,QAAQ,CAACM,iBAAiB,CAAC,2BAA2B,CAAC;IACzD,CAAC,MAAM,IAAI,CAAC,sBAAsB,CAACC,IAAI,CAACP,QAAQ,CAACK,KAAK,CAAC,EAAE;MACvDL,QAAQ,CAACM,iBAAiB,CACxB,8CACF,CAAC;IACH,CAAC,MAAM,IAAIN,QAAQ,CAACK,KAAK,CAACG,MAAM,GAAG,EAAE,EAAE;MACrCR,QAAQ,CAACM,iBAAiB,CAAC,4CAA4C,CAAC;IAC1E,CAAC,MAAM;MACLN,QAAQ,CAACM,iBAAiB,CAAC,EAAE,CAAC;IAChC;EACF,CAAC;EAED,MAAMG,aAAa,GAAGA,CAAA,KAAM;IAC1B9C,MAAM,CAACgC,IAAI,CAAC,OAAO,EAAErB,MAAM,CAAC;EAC9B,CAAC;EAED,MAAMoC,QAAQ,GAAGA,CAAA,KAAM;IACrBC,SAAS,CAACC,SAAS,CAACC,SAAS,CAAC5B,GAAG,CAAC,CAAC6B,IAAI,CACrC,MAAM;MACJC,YAAY,CAAC/B,QAAQ,CAACgC,OAAO,CAAC;MAC9BjC,OAAO,CAAC,SAAS,CAAC;MAClBC,QAAQ,CAACgC,OAAO,GAAGC,UAAU,CAAC,MAAMlC,OAAO,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC;IACjE,CAAC,EACD,MAAM;MACJgC,YAAY,CAAC/B,QAAQ,CAACgC,OAAO,CAAC;MAC9BjC,OAAO,CAAC,gBAAgB,CAAC;MACzBC,QAAQ,CAACgC,OAAO,GAAGC,UAAU,CAAC,MAAMlC,OAAO,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC;IACjE,CACF,CAAC;EACH,CAAC;EAEDvB,SAAS,CAAC,MAAM;IACdG,MAAM,CAACuD,EAAE,CAAC,QAAQ,EAAE7B,YAAY,CAAC;IACjC1B,MAAM,CAACgC,IAAI,CAAC,UAAU,EAAErB,MAAM,CAAC;IAE/B,OAAO,MAAM;MACXX,MAAM,CAACwD,GAAG,CAAC,QAAQ,EAAE9B,YAAY,CAAC;IACpC,CAAC;EACH,CAAC,EAAE,CAACf,MAAM,EAAEe,YAAY,CAAC,CAAC;EAE1B,MAAM+B,MAAM,GAAGA,CAAA,KAAM;IACnB,IAAI7C,SAAS,IAAIA,SAAS,CAAC4B,OAAO,CAACK,MAAM,IAAIjC,SAAS,CAAC8C,GAAG,IAAIhD,IAAI,KAAK,EAAE,EAAE;MACzE,oBAAOJ,OAAA;QAAAqD,QAAA,EAAG;MAAmB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IACnC;IAEA,oBACEzD,OAAA,CAAAE,SAAA;MAAAmD,QAAA,gBACErD,OAAA,CAACF,UAAU;QAAC4D,OAAO,EAAC,IAAI;QAACC,SAAS;QAAAN,QAAA,EAAC;MAEnC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,EAEZnD,SAAS,CAAC4B,OAAO,CAAC0B,GAAG,CAAEC,MAAM,iBAC5B7D,OAAA,CAACF,UAAU;QAAc4D,OAAO,EAAC,IAAI;QAAAL,QAAA,EAClCQ;MAAM,GADQA,MAAM;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEX,CACb,CAAC,eAEFzD,OAAA;QAAAsD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EAELrD,IAAI,KAAKE,SAAS,CAACwD,MAAM,IAAIxD,SAAS,CAAC4B,OAAO,CAACK,MAAM,IAAI,CAAC,iBACzDvC,OAAA,CAACH,MAAM;QAAC6D,OAAO,EAAC,WAAW;QAACK,KAAK,EAAC,SAAS;QAACC,OAAO,EAAExB,aAAc;QAAAa,QAAA,EAAC;MAEpE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CACT,EAEA,CAACnD,SAAS,CAAC4B,OAAO,CAACC,QAAQ,CAAC/B,IAAI,CAAC,iBAChCJ,OAAA;QAAKiE,EAAE,EAAC,MAAM;QAAAZ,QAAA,eACZrD,OAAA;UAAMkE,QAAQ,EAAE5C,gBAAiB;UAAA+B,QAAA,gBAC/BrD,OAAA,CAACL,UAAU;YAACwE,OAAO,EAAC,UAAU;YAAAd,QAAA,EAAC;UAAQ;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eACpDzD,OAAA,CAACJ,SAAS;YACRwE,IAAI,EAAC,MAAM;YACXhC,KAAK,EAAEzB,QAAS;YAChB0D,QAAQ,EAAG9C,CAAC,IAAKX,WAAW,CAACW,CAAC,CAAC+C,MAAM,CAAClC,KAAK,CAAE;YAC7CmC,OAAO,EAAEzC,gBAAiB;YAC1BmC,EAAE,EAAC,UAAU;YACbO,IAAI,EAAC,UAAU;YACfC,QAAQ;UAAA;YAAAnB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CACN,eAEDzD,OAAA;QAAAsD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACNzD,OAAA;QAAAsD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAENzD,OAAA,CAACF,UAAU;QAAC6D,SAAS;QAAAN,QAAA,GAAC,oCAEpB,eAAArD,OAAA;UAAAsD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,EACLzC,GAAG,EAAE,GAAG,eACThB,OAAA,CAACH,MAAM;UAACmE,OAAO,EAAEvB,QAAS;UAACsB,KAAK,EAAC,SAAS;UAAAV,QAAA,EACvCxC;QAAI;UAAAyC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA,eACb,CAAC;EAEP,CAAC;EAED,oBAAOzD,OAAA;IAAAqD,QAAA,EAAMF,MAAM,CAAC;EAAC;IAAAG,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;AAC9B;AAAC/C,EAAA,CAzIQP,IAAI;AAAAuE,EAAA,GAAJvE,IAAI;AA2Ib,eAAeA,IAAI;AAAC,IAAAuE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}