{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\srush\\\\hangman\\\\frontend\\\\src\\\\components\\\\Lobby.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport PlayerList from \"./PlayerList\";\nimport GameRoom from \"./GameRoom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Lobby({\n  socket,\n  roomId,\n  initialPlayerId\n}) {\n  _s();\n  const [roomState, setRoomState] = useState(null);\n  const [playerId, setPlayerId] = useState(initialPlayerId || null);\n  const [playerName, setPlayerName] = useState(\"\");\n  const [joined, setJoined] = useState(false);\n\n  // Join room\n  const joinRoom = () => {\n    if (!playerName || playerName.trim().length === 0) return alert(\"Enter your name\");\n    socket.emit(\"join-room\", {\n      roomId,\n      playerId,\n      playerName\n    }, response => {\n      if (response.success) {\n        setJoined(true);\n      } else {\n        alert(response.message || \"Failed to join room\");\n      }\n    });\n  };\n  useEffect(() => {\n    const s = socket;\n\n    // Player joined/left updates\n    s.on(\"player-joined\", data => setRoomState(prev => ({\n      ...prev,\n      players: data.players\n    })));\n    s.on(\"player-left\", data => {\n      setRoomState(prev => {\n        if (!prev) return prev;\n        return {\n          ...prev,\n          players: prev.players.filter(p => p.id !== data.playerId)\n        };\n      });\n    });\n\n    // Game updates\n    s.on(\"game-state\", state => setRoomState(state));\n    s.on(\"game-started\", state => setRoomState(state));\n    s.on(\"round-started\", state => setRoomState(state));\n    s.on(\"waiting-for-word\", state => setRoomState(state));\n    s.on(\"round-ended\", state => setRoomState(state));\n\n    // Joined room confirmation\n    s.on(\"joined-room\", data => {\n      setPlayerId(data.playerId);\n      setRoomState(prev => ({\n        ...prev,\n        settings: data.settings\n      }));\n    });\n    return () => {\n      s.off(\"player-joined\");\n      s.off(\"player-left\");\n      s.off(\"game-state\");\n      s.off(\"game-started\");\n      s.off(\"round-started\");\n      s.off(\"waiting-for-word\");\n      s.off(\"round-ended\");\n      s.off(\"joined-room\");\n    };\n  }, [socket]);\n  if (!joined) {\n    // Show join input\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Join Room: \", roomId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter your name\",\n        value: playerName,\n        onChange: e => setPlayerName(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: joinRoom,\n        children: \"Join Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this);\n  }\n  if (!roomState) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading room...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 12\n    }, this);\n  }\n\n  // If game started, render GameRoom\n  if (roomState.gameStarted) {\n    return /*#__PURE__*/_jsxDEV(GameRoom, {\n      socket: socket,\n      playerId: playerId,\n      roomState: roomState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Lobby view before game start\n  const currentPlayer = roomState.players.find(p => p.id === playerId);\n  const isHost = currentPlayer === null || currentPlayer === void 0 ? void 0 : currentPlayer.isHost;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Lobby: \", roomId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PlayerList, {\n      players: roomState.players\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), isHost && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => socket.emit(\"start-game\", {\n        roomId: roomState.roomId,\n        playerId\n      }),\n      children: \"Start Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Waiting for players...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n_s(Lobby, \"rWqyNUOl5h3lecKv/6296RE5aQE=\");\n_c = Lobby;\nvar _c;\n$RefreshReg$(_c, \"Lobby\");","map":{"version":3,"names":["useState","useEffect","PlayerList","GameRoom","jsxDEV","_jsxDEV","Lobby","socket","roomId","initialPlayerId","_s","roomState","setRoomState","playerId","setPlayerId","playerName","setPlayerName","joined","setJoined","joinRoom","trim","length","alert","emit","response","success","message","s","on","data","prev","players","filter","p","id","state","settings","off","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","gameStarted","currentPlayer","find","isHost","_c","$RefreshReg$"],"sources":["C:/Users/srush/hangman/frontend/src/components/Lobby.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport PlayerList from \"./PlayerList\";\r\nimport GameRoom from \"./GameRoom\";\r\n\r\nexport default function Lobby({ socket, roomId, initialPlayerId }) {\r\n  const [roomState, setRoomState] = useState(null);\r\n  const [playerId, setPlayerId] = useState(initialPlayerId || null);\r\n  const [playerName, setPlayerName] = useState(\"\");\r\n  const [joined, setJoined] = useState(false);\r\n\r\n  // Join room\r\n  const joinRoom = () => {\r\n    if (!playerName || playerName.trim().length === 0) return alert(\"Enter your name\");\r\n\r\n    socket.emit(\r\n      \"join-room\",\r\n      { roomId, playerId, playerName },\r\n      (response) => {\r\n        if (response.success) {\r\n          setJoined(true);\r\n        } else {\r\n          alert(response.message || \"Failed to join room\");\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    const s = socket;\r\n\r\n    // Player joined/left updates\r\n    s.on(\"player-joined\", (data) => setRoomState((prev) => ({ ...prev, players: data.players })));\r\n    s.on(\"player-left\", (data) => {\r\n      setRoomState((prev) => {\r\n        if (!prev) return prev;\r\n        return { ...prev, players: prev.players.filter(p => p.id !== data.playerId) };\r\n      });\r\n    });\r\n\r\n    // Game updates\r\n    s.on(\"game-state\", (state) => setRoomState(state));\r\n    s.on(\"game-started\", (state) => setRoomState(state));\r\n    s.on(\"round-started\", (state) => setRoomState(state));\r\n    s.on(\"waiting-for-word\", (state) => setRoomState(state));\r\n    s.on(\"round-ended\", (state) => setRoomState(state));\r\n\r\n    // Joined room confirmation\r\n    s.on(\"joined-room\", (data) => {\r\n      setPlayerId(data.playerId);\r\n      setRoomState((prev) => ({ ...prev, settings: data.settings }));\r\n    });\r\n\r\n    return () => {\r\n      s.off(\"player-joined\");\r\n      s.off(\"player-left\");\r\n      s.off(\"game-state\");\r\n      s.off(\"game-started\");\r\n      s.off(\"round-started\");\r\n      s.off(\"waiting-for-word\");\r\n      s.off(\"round-ended\");\r\n      s.off(\"joined-room\");\r\n    };\r\n  }, [socket]);\r\n\r\n  if (!joined) {\r\n    // Show join input\r\n    return (\r\n      <div>\r\n        <h2>Join Room: {roomId}</h2>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter your name\"\r\n          value={playerName}\r\n          onChange={(e) => setPlayerName(e.target.value)}\r\n        />\r\n        <button onClick={joinRoom}>Join Room</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!roomState) {\r\n    return <p>Loading room...</p>;\r\n  }\r\n\r\n  // If game started, render GameRoom\r\n  if (roomState.gameStarted) {\r\n    return <GameRoom socket={socket} playerId={playerId} roomState={roomState} />;\r\n  }\r\n\r\n  // Lobby view before game start\r\n  const currentPlayer = roomState.players.find((p) => p.id === playerId);\r\n  const isHost = currentPlayer?.isHost;\r\n\r\n  return (\r\n    <div>\r\n      <h2>Lobby: {roomId}</h2>\r\n      <PlayerList players={roomState.players} />\r\n\r\n      {isHost && (\r\n        <button\r\n          onClick={() =>\r\n            socket.emit(\"start-game\", { roomId: roomState.roomId, playerId })\r\n          }\r\n        >\r\n          Start Game\r\n        </button>\r\n      )}\r\n\r\n      <h3>Waiting for players...</h3>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}