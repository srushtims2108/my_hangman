{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\srush\\\\hangman\\\\frontend\\\\src\\\\components\\\\GameRoom.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport HangmanCanvas from \"./HangmanVisual\";\nimport WordDisplay from \"./WordDisplay\";\nimport PlayerList from \"./PlayerList\";\nimport Chat from \"./ChatBox\";\nimport GameOver from \"./GameOver\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SERVER_URL = \"http://localhost:5000\"; // change if needed\n\nconst GameRoom = () => {\n  _s();\n  const {\n    roomId\n  } = useParams();\n  const [socket, setSocket] = useState(null);\n  const [playerId, setPlayerId] = useState(null);\n  const [playerName, setPlayerName] = useState(\"\");\n  const [gameState, setGameState] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // Generate per-tab playerId\n  useEffect(() => {\n    const newId = sessionStorage.getItem(`playerId_${roomId}`) || crypto.randomUUID();\n    sessionStorage.setItem(`playerId_${roomId}`, newId);\n    setPlayerId(newId);\n  }, [roomId]);\n\n  // Connect socket\n  useEffect(() => {\n    if (!playerId) return;\n    const s = io(SERVER_URL);\n    setSocket(s);\n\n    // Join room\n    s.emit(\"join-room\", {\n      roomId,\n      playerId,\n      playerName: `Player-${playerId.slice(0, 4)}`\n    }, res => {\n      if (!res.success) alert(\"Failed to join room: \" + res.message);\n    });\n\n    // Listen for updates\n    s.on(\"game-state\", state => {\n      setGameState(state);\n      setLoading(false);\n    });\n    s.on(\"round-started\", state => setGameState(state));\n    s.on(\"game-started\", state => setGameState(state));\n    s.on(\"player-joined\", data => setGameState(prev => ({\n      ...prev,\n      players: data.players\n    })));\n    s.on(\"player-left\", data => setGameState(prev => {\n      var _prev$players;\n      return {\n        ...prev,\n        players: prev === null || prev === void 0 ? void 0 : (_prev$players = prev.players) === null || _prev$players === void 0 ? void 0 : _prev$players.filter(p => p.id !== data.playerId)\n      };\n    }));\n\n    // Cleanup on unmount\n    return () => {\n      s.emit(\"leave-room\", {\n        roomId,\n        playerId\n      });\n      s.disconnect();\n    };\n  }, [playerId, roomId]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading game...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 23\n  }, this);\n  if (!gameState) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Error loading game.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 26\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-room\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Room: \", roomId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PlayerList, {\n      players: gameState.players,\n      currentPlayerId: playerId,\n      wordSetterId: gameState.wordSetterId,\n      currentTurnId: gameState.currentTurnId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(WordDisplay, {\n      word: gameState.revealedWord\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HangmanCanvas, {\n      strikes: gameState.globalStrikes,\n      maxStrikes: gameState.settings.maxStrikes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Chat, {\n      socket: socket,\n      playerId: playerId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), gameState.gameOver && /*#__PURE__*/_jsxDEV(GameOver, {\n      gameState: gameState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 30\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(GameRoom, \"E8aThSHwoD21QeI3Z9o1oKv8168=\", false, function () {\n  return [useParams];\n});\n_c = GameRoom;\nexport default GameRoom;\nvar _c;\n$RefreshReg$(_c, \"GameRoom\");","map":{"version":3,"names":["React","useEffect","useState","useParams","io","HangmanCanvas","WordDisplay","PlayerList","Chat","GameOver","jsxDEV","_jsxDEV","SERVER_URL","GameRoom","_s","roomId","socket","setSocket","playerId","setPlayerId","playerName","setPlayerName","gameState","setGameState","loading","setLoading","newId","sessionStorage","getItem","crypto","randomUUID","setItem","s","emit","slice","res","success","alert","message","on","state","data","prev","players","_prev$players","filter","p","id","disconnect","children","fileName","_jsxFileName","lineNumber","columnNumber","className","currentPlayerId","wordSetterId","currentTurnId","word","revealedWord","strikes","globalStrikes","maxStrikes","settings","gameOver","_c","$RefreshReg$"],"sources":["C:/Users/srush/hangman/frontend/src/components/GameRoom.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport io from \"socket.io-client\";\r\nimport HangmanCanvas from \"./HangmanVisual\";\r\nimport WordDisplay from \"./WordDisplay\";\r\nimport PlayerList from \"./PlayerList\";\r\nimport Chat from \"./ChatBox\";\r\nimport GameOver from \"./GameOver\";\r\n\r\nconst SERVER_URL = \"http://localhost:5000\"; // change if needed\r\n\r\nconst GameRoom = () => {\r\n  const { roomId } = useParams();\r\n  const [socket, setSocket] = useState(null);\r\n  const [playerId, setPlayerId] = useState(null);\r\n  const [playerName, setPlayerName] = useState(\"\");\r\n  const [gameState, setGameState] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Generate per-tab playerId\r\n  useEffect(() => {\r\n    const newId = sessionStorage.getItem(`playerId_${roomId}`) || crypto.randomUUID();\r\n    sessionStorage.setItem(`playerId_${roomId}`, newId);\r\n    setPlayerId(newId);\r\n  }, [roomId]);\r\n\r\n  // Connect socket\r\n  useEffect(() => {\r\n    if (!playerId) return;\r\n    const s = io(SERVER_URL);\r\n    setSocket(s);\r\n\r\n    // Join room\r\n    s.emit(\"join-room\", { roomId, playerId, playerName: `Player-${playerId.slice(0, 4)}` }, (res) => {\r\n      if (!res.success) alert(\"Failed to join room: \" + res.message);\r\n    });\r\n\r\n    // Listen for updates\r\n    s.on(\"game-state\", (state) => {\r\n      setGameState(state);\r\n      setLoading(false);\r\n    });\r\n\r\n    s.on(\"round-started\", (state) => setGameState(state));\r\n    s.on(\"game-started\", (state) => setGameState(state));\r\n    s.on(\"player-joined\", (data) => setGameState((prev) => ({ ...prev, players: data.players })));\r\n    s.on(\"player-left\", (data) => setGameState((prev) => ({\r\n      ...prev,\r\n      players: prev?.players?.filter(p => p.id !== data.playerId)\r\n    })));\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      s.emit(\"leave-room\", { roomId, playerId });\r\n      s.disconnect();\r\n    };\r\n  }, [playerId, roomId]);\r\n\r\n  if (loading) return <div>Loading game...</div>;\r\n  if (!gameState) return <div>Error loading game.</div>;\r\n\r\n  return (\r\n    <div className=\"game-room\">\r\n      <h2>Room: {roomId}</h2>\r\n      <PlayerList\r\n        players={gameState.players}\r\n        currentPlayerId={playerId}\r\n        wordSetterId={gameState.wordSetterId}\r\n        currentTurnId={gameState.currentTurnId}\r\n      />\r\n      <WordDisplay word={gameState.revealedWord} />\r\n      <HangmanCanvas strikes={gameState.globalStrikes} maxStrikes={gameState.settings.maxStrikes} />\r\n      <Chat socket={socket} playerId={playerId} />\r\n      {gameState.gameOver && <GameOver gameState={gameState} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameRoom;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}